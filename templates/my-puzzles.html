<!DOCTYPE html>
<html lang="en">
  {% extends 'base.html' %} {% block content %}
  <section class="container">
    <h3 class="intro"><span>"{{user["username"]}}'s"</span> puzzles</h3>
    <div class="row center-align">
      {% if user["_id"] == session["id"] %}
      <div class="col s6 m4 offset-m2 l3 offset-l3">
        <a
          href="{{url_for('search', search_category='All')}}"
          class="deep-orange btn"
          ><i class="material-icons left">chevron_left</i>Back</a
        >
      </div>
      <div class="col s6 m4 l3">
        <a href="{{url_for('upload_puzzle')}}" class="deep-orange btn"
          ><i class="material-icons right">cloud_upload</i
          ><strong>+</strong>puzzle</a
        >
      </div>
      {% else %}
      <div class="col s6 offset-s3 l2 offset-l5">
        <a
          href="{{url_for('search', search_category='All')}}"
          class="deep-orange btn"
          ><i class="material-icons left">chevron_left</i>Back</a
        >
      </div>
      {% endif %}
    </div>
  </section>
  <section class="container">
    <div class="row">
      {% for puzzle in puzzles %}
      <div class="col s6 m4 l2">
        <div class="card medium hoverable">
          <div class="card-image waves-effect waves-block waves-light">
            <img src="{{puzzle.image}}" />
          </div>
          <div class="card-content">
            <div class="card-answer">
              <button
                class="answer-button deep-orange text-lighten-1 btn-small btn-flat"
              >
                See Answer
              </button>
              <p class="left-align answer" hidden>
                {{puzzle.answer.title()}}
              </p>
            </div>
            <p class="left-align">
              Difficulty:
            </p>
            <p class="left-align">{{puzzle.difficulty.capitalize()}}</p>
          </div>
          <div class="div thumb-icons">
            <i class="material-icons left like">thumb_up</i>
            <p class="like left-align">{{ puzzle.likes|count }}</p>
            <i class="material-icons left dislike">thumb_down</i>
            <p class="dislike left-align">{{ puzzle.dislikes|count }}</p>
          </div>
          {% if user['_id'] == session['id'] %}
          <div>
            <a
              href="{{url_for('edit_puzzle', puzzle_id=puzzle._id)}}"
              class="btn btn_small blue"
              >Edit</a
            >
            <a
              href="{{url_for('delete_puzzle', puzzle_id=puzzle._id)}}"
              class="waves-effect waves-light btn btn_small red"
              >Delete</a
            >
          </div>
          {% endif %}
          <div class="card-reveal">
            <span class="card-title grey-text text-darken-4"
              >Answer<i class="material-icons right">close</i></span
            >
            <h5 class="left-align">
              {{puzzle.answer.title()}}
            </h5>
          </div>
        </div>
      </div>

      {% endfor %}
    </div>
  </section>
  <script type="text/javascript">
    $(document).ready(function () {
      console.log("Xtra Document ready!");
      $(".answer-button").click(function () {
        $(this).toggle();
        $(this).siblings(".answer").toggle();
      });
      $(".answer").click(function () {
        $(this).toggle();
        $(this).siblings(".answer-button").toggle();
      });
    });
  </script>
  {% endblock %}
</html>
